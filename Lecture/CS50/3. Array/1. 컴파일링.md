# 1. 컴파일링

<br/>

- hello.c

```c
#include <stdio.h>

int main(void)
{
    printf("hello, world\n");
}
```



<br/>

- 컴파일 명령어

```
clang hello.c
```

컴퓨터가 이해하는 0과 1로 된 a.out 파일이 생성된다.

<br/>

- a.out이 아닌 다른 이름(hello)으로 컴파일을 하고 싶으면 다음의 명령어를 입력하면 된다.

```
clang -o hello hello.c
```

<br/>

- CS50 라이브러리를 사용한 프로그램을 컴파일 할때는 아래의 명령어를 입력해야 한다.

```
clang -o hello hello.c -lcs50
```

<br/>

- 이는 clang에게 CS50 라이브러리에 있는 모든 0과 1들을 여기에 연결하라는 의미이다.



<br/>

#### make

- make를 이용하면 이 모든 컴파일 과정이 자동으로 처리된다.
- ex)

```
make hello
```



<br/>

- make나 clang을 사용해서 프로그램을 실행할 때 아래 네 개의 단계를 거친다.
  - 전처리
  - 컴파일링
  - 어셈블링
  - 링킹



<br/>

- 컴파일의 전체 과정은 네 단계로 나누어볼 수 있다.

### 전처리(Precompile)

- 첫번째 단계
- C 소스 코드는 전처리기에게 실질적인 컴파일이 이루어지기 전에 무언가를 실행하라고 알려준다.
- ex) #include
  - 전처리기에게 다른 파일의 내용을 포함시키라고 알려준다.



<br/>

### 컴파일(Compile)

- 전처리기가 전처리한 소스 코드를 생성하고 나면 그 다음 단계는 컴파일이다.
- 컴파일러라고 불리는 프로그램
- C 코드를 어셈블리어라는 저수준 프로그래밍 언어로 컴파일한다.
- 어셈블리는 C보다 연산의 종류가 훨씬 적지만, 여러 연산들이 함께 사용되면 C에서 할 수 있는 모든 것들을 수행할 수 있다.
- C 코드를 어셈블리 코드로 변환시켜줌으로써 컴파일러는 컴퓨터가 이해할 수 있는 언어와 최대한 가까운 프로그램으로 만들어 준다.
- 컴퍼일이하는 용어는 소스 코드에서 오브젝트 코드로 변환하는 전체 과정을 통틀어 일컫기도 하지만, 구체적으로 전처리한 소스 코드를 어셈블리 코드로 변환시키는 단계를 말하기도 한다.



<br/>

### 어셈블(Assemble)

- 소스 코드가 어셈블리 코드로 변환되면, 다음 단계인 어셈블 단계로 어셈블리 코드를 오브젝트 코드로 변환시키는 것 이다.
- 컴퓨터의 중앙처리장치가 프로그램을 어떻게 수행해야 하는지 알 수 있는 명령어 형태인 연속된 0과 1들로 바꿔주는 작업
- 이 변환작업은 어셈블러라는 프로그램이 수행한다.
- 소스 코드에서 오브젝트 코드로 컴파일이 되어야 할 파일이 딱 한 개라면, 컴파일 작업은 여기서 끝이 난다.
- 만약 그렇지 않다면 링크라고 불리는 단계가 추가된다.



<br/>

### 링크(Link)

- 만약 프로그램이 (math.h나 cs50.h와 같은 라이브러리를 포함해) 여러 개의 파일로 이루어져 있어 하나의 오브젝트 파일로 합쳐져야 한다면 링크라는 컴파일의 마지막 단계가 필요하다.
- 링커는 어려 개의 다른 오브젝트 코드 파일을 실행 가능한 하나의 오브젝트 코드 파일로 합쳐준다.
- 예를 들어, 컴파일을 하는 동안에 CS50 라이브러리를 링크하면 오브젝트 코드는 GetInt()나 GetString() 같은 함수를 어떻게 실행할 지 알 수 있게 된다.



<br/>

- 이 네 단계를 거치면 최종적으로 실행 가능한 파일이 완성된다.





<br/><br/>