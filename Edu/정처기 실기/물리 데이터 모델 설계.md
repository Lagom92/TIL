# 물리 데이터 모델 설계

<br/>

## 1. 반정규화 개념

<br/>

### 1. 정의

정규화에 충실하여 모델링을 수행하면 종속성과 활용성은 향상되나 수행속도가 증가하는 경우가 발생하여 이를 극복하기 위해 성능에 중점을 두어 정규화 하는 방법이다.



<br/>

### 2. 특징

1. 데이터 모델링 규칙에 얽매이지 않고 수행한다.
2. 시스템이 물리적으로 구현되었을 때 성능 향상을 목적으로 한다.



<br/>

### 3. 사용시기

1. 정규화에 충실하였으나 수행속도에 문제가 있는 경우
2. 다량의 범위를 자주 처리해야 하는 경우
3. 특정 범위의 데이터만 자주 처리하는 경우
4. 처리 범위를 줄이지 않고는 수행속도를 개선할 수 없는 경우
5. 요약 자료만 주로 요구되는 경우
6. 추가된 테이블의 처리를 위한 오버헤드를 고려하여 결정
7. 인덱스의 조정이나 부분 범위 처리로 유도하고, 클러스터링을 이용하여 해결할 수 있는지를 철저히 검토 후 결정



<br/>

## 2. 반정규화 유형

<br/>

### 1. 용도

- 테이블 반정규화

| 기법        | 용도                                                         |
| ----------- | ------------------------------------------------------------ |
| 테이블 병합 | 부분 처리가 두 개 이상의 테이블에 대해 항상 같이 일어나는 경우 |
| 테이블 분할 | - 칼럼의 사용빈도 차이가 많은 경우<br />- 각각의 사용자가 각기 특정한 부분만 지속적으로 사용하는 경우 |
| 테이블 추가 | - 다량의 범위를 자주 처리하는 경우<br />- 특정 범위의 데이터만 자주 처리되는 경우<br />- 처리 범위를 줄이지 않고는 수행속도를 개선할 수 없는 경우 |
| 테이블 제거 | 테이블 재정의나 칼럼의 중복화로 더 이상 엑세스 되지 않는 테이블이 발생할 경우 |



<br/>

- Column 반정규화

| 기법                | 용도                                                         |
| ------------------- | ------------------------------------------------------------ |
| 중복 컬럼 추가      | 자주 사용되는 칼럼이 다른 테이블에 분산되어 있어 상세한 조건에도 불구하고 엑세스 범위를 줄이지 못하는 경우 |
| 파생 컬럼 추가      | 대량 데이터에서 Row별 연산 결과를 얻고자 할 때 성능 향상을 위한 파생(Derived) 칼럼을 추가할 경우 |
| 이력 컬럼 추가      | 대량 데이터 처리 시 불특정 일자 조회나 최근 값을 조회할 때 나타날 수 있는 성능 저하 예방 |
| PK에 의한 컬럼 추가 | 기본키의 형태가 적절하지 않거나 너무 많은 칼럼으로 구성된 경우 |



<br/>

### 2. 방법

- 테이블 반정규화

| 기법        | 방법                                                         |
| ----------- | ------------------------------------------------------------ |
| 테이블 병합 | 해당 테이블을 통합하여 설계                                  |
| 테이블 분할 | - 수직 분할: 칼럼별 사용빈도의 차이가 많은 경우 자주 사용되는 칼럼들과 그렇지 않은 칼럼으로 분류하여 테이블을 분할<br />- 수평 분할: 특정 범위별 사용 빈도의 차이가 많은 경우 해당 범위 별로 테이블을 분할 |
| 테이블 추가 | - 집계 테이블의 추가: 활용하고자 하는 집계 정보를 위한 테이블을 추가<br />- 진행 테이블의 추가<br />- 특정 부분만을 포함하는 테이블 추가 |



<br/>

- Column 반정규화

| 기법                | 방법                                 |
| ------------------- | ------------------------------------ |
| 중복 컬럼 추가      | Join 성능 향상을 위해 중복 컬럼 추가 |
| 파생 컬럼 추가      | 계산된 값을 저장하는 파생 컬럼 추가  |
| 이력 컬럼 추가      | 최근 값, 시작 일자 등의 컬럼 추가    |
| PK에 의한 컬럼 추가 | 복합 PK의 일부를 일반 속성으로 추가  |



<br/>

## 3. 물리적 모델링 수행 순서

<br/>

--ing







<br/><br/>